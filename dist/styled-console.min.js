!function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.StyledConsole=b()}(this,function(){var a=function(){return this instanceof a?void 0:new a(contents)};a.prototype={bind:function(a,b){this._events||(this._events={});var c=this._events[a]=this._events[a]||[];c.push(b)},unbind:function(a,b){if(this._events){if(!a)return void(this._events=void 0);if(this._events[a]){if(!b)return void delete this._events[a];var c,d=this._events[a]=this._events[a]||[],e=d.length,f=[];for(c=0;e>c;c++)d[c]!==b&&f.push(d[c]);f.length?this._events[a]=f:delete this._events[a]}}},trigger:function(a){var b=[].slice.call(arguments,1);if(this._events&&this._events[a]){var c,d=this._events[a],e=d.length;for(c=0;e>c;c++)d[c].apply(this,b)}},parse:function(a){for(var b=[];""!==a;){var c=null;if(c=a.match(/^<([^>\/]+)>/)){var d=c[1],e=d,f=null;(f=d.match(/\s/))&&(e=d.substr(f.index));var g={name:e,plainString:d};b.push(g),this.trigger("open",g),this.trigger("open:success",g),a=a.substr(c[0].length)}else if(c=a.match(/^<\/([^>]+)>/)){var h,e=c[1],i=null,j=0;for(h=b.length;h--&&(i=b[h],i.name!==e);)j++;if(i&&i.name===e){var g=b.pop();for(h=0;j>h;h++)this.trigger("close:fail",g),g=b.pop();this.trigger("close",g),this.trigger("close:success",g)}else{var g={name:e};this.trigger("close",g),this.trigger("close:fail",g)}a=a.substr(c[0].length)}else if(c=a.match(/</)){var k=c.index;this.trigger("text",a.substr(0,k),b),a=a.substr(k)}else this.trigger("text",a,b),a=""}}};var b={black:30,red:31,green:32,yellow:33,blue:34,purple:35,cyan:36,gray:37,sblack:90,sred:91,sgreen:92,syellow:93,sblue:94,spurple:95,scyan:96,sgray:97},c={black:40,red:41,green:42,yellow:43,blue:44,purple:45,cyan:46,gray:47,sblack:100,sred:101,sgreen:102,syellow:103,sblue:104,spurple:105,scyan:106,sgray:107},d=function(a){switch(a=a.trim()){case"strong":case"b":return 1;case"underline":case"u":return 4}if(0===a.indexOf("color:")||0===a.indexOf("c:"))return e(a);if(0===a.indexOf("background:")||0===a.indexOf("b:"))return f(a);throw new{message:"the tag named '{tag}' does not exist.",code:1}},e=function(a){var c=a.substr(a.indexOf(":")+1);if(!b[c])throw new{message:"the font color named '"+c+"' does not exist.'",code:2};return b[c]},f=function(a){var b=a.substr(a.indexOf(":")+1);if(!c[b])throw new{message:"the background color named '"+b+"' does not exist.'",code:4};return c[b]},g=function(b){return this instanceof g?(b=b||{},void(this._parser=new a)):new g};return g.prototype={parse:function(a){var b="",c=!0;return this._parser.bind("text",function(a,e){var f,g,h=[];for(f=0,g=e.length;g>f;f++)try{h.push(d(e[f].name))}catch(i){}c||(b+="[0m",c=!0),h.length&&(b+="["+h.join(";")+"m",c=!1),b+=a}),this._parser.parse(a),c||(b+="[0m"),b.replace("&lt;","<").replace("&gt;",">")}},g});